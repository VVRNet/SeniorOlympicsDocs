\doxysection{Game\+Record\+Service 클래스 참조}
\hypertarget{class_game_record_service}{}\label{class_game_record_service}\index{GameRecordService@{GameRecordService}}


게임 기록 관련 작업을 처리하는 서비스 클래스입니다.  




Game\+Record\+Service에 대한 상속 다이어그램 \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{class_game_record_service__inherit__graph}
\end{center}
\end{figure}


Game\+Record\+Service에 대한 협력 다이어그램\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{class_game_record_service__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_ada0bad7effce61b2c0f0b9061e3da049}{Save\+Game\+Record}} (\mbox{\hyperlink{class_game_record}{Game\+Record}} game\+Record, Action$<$ List$<$ string $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em 게임 기록을 저장합니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_af0049715eb82f6bc892a00d2da8c4144}{Get\+Content\+Ranking}} (string content\+Name, Action$<$ List$<$ \mbox{\hyperlink{class_rank}{Rank}} $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em 콘텐츠별 랭킹을 불러옵니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a1e201269686abda9273e4b83695bb5ac}{Get\+Content\+My\+Ranking}} (string content\+Name, string user\+ID, bool is\+Class, Action$<$ List$<$ \mbox{\hyperlink{class_rank}{Rank}} $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em 콘텐츠별 개인 순위를 불러옵니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a5df32babc993ae2eb48934dac0310153}{Get\+Content\+My\+Ranking\+With\+Neighbors}} (string content\+Name, string user\+ID, Action$<$ \mbox{\hyperlink{class_dual_rank}{Dual\+Rank}} $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a6e15261538fd2e4db6b4eb269ae1910a}{Get\+Top\+Percent\+My\+Score}} (string content\+Name, int score, Action$<$ List$<$ int $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em 게임 종료시 데이터를 불러옵니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a586799f9c49734e0656f67056f6a3181}{Get\+Best\+Score}} (string content\+Name, string user\+ID, bool is\+Class, Action$<$ List$<$ int $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em 콘텐츠별 개인 순위를 불러옵니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a2b88a939186fcd23a265e5a3c3fc29d5}{Get\+Dual\+Content\+Best\+Score}} (string content\+Name, Action$<$ int $>$ callback)
\begin{DoxyCompactList}\small\item\em 콘텐츠별 개인 순위를 불러옵니다. \end{DoxyCompactList}\item 
IEnumerator \mbox{\hyperlink{class_game_record_service_a45408f80a44293f295eba9010a8255d1}{Get\+Dual\+Top\+Percent}} (string content\+Name, int score, Action$<$ int $>$ callback)
\begin{DoxyCompactList}\small\item\em 콘텐츠별 개인 순위를 불러옵니다. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{추가로 상속된 멤버들}
\doxysubsection*{\mbox{\hyperlink{class_base_service}{Base\+Service}}(으)로부터 상속된 Protected 멤버 함수}
\begin{DoxyCompactItemize}
\item 
IEnumerator \mbox{\hyperlink{class_base_service_a58277b5cf1c1f86cefcfa19a3069ccde}{Send\+Request$<$ T $>$}} (string url, string json\+Data, Action$<$ List$<$ T $>$ $>$ callback)
\begin{DoxyCompactList}\small\item\em HTTP 요청을 보내는 메서드입니다. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{\mbox{\hyperlink{class_base_service}{Base\+Service}}(으)로부터 상속된 Protected 속성}
\begin{DoxyCompactItemize}
\item 
string \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{base\+Url}} = "{}https\+://us-\/west-\/2.aws.\+data.\+mongodb-\/api.\+com/app/data-\/xhqnv/endpoint/data/v1/action/"{}
\end{DoxyCompactItemize}


\doxysubsection{상세한 설명}
게임 기록 관련 작업을 처리하는 서비스 클래스입니다. 

\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00014}{14}} 번째 라인에서 정의되었습니다.



\doxysubsection{멤버 함수 문서화}
\Hypertarget{class_game_record_service_a586799f9c49734e0656f67056f6a3181}\index{GameRecordService@{GameRecordService}!GetBestScore@{GetBestScore}}
\index{GetBestScore@{GetBestScore}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetBestScore()}{GetBestScore()}}
{\footnotesize\ttfamily \label{class_game_record_service_a586799f9c49734e0656f67056f6a3181} 
IEnumerator Game\+Record\+Service.\+Get\+Best\+Score (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{string}]{user\+ID}{, }\item[{bool}]{is\+Class}{, }\item[{Action$<$ List$<$ int $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



콘텐츠별 개인 순위를 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em content\+Name} & 콘텐츠 이름입니다. \\
\hline
{\em user\+ID} & 유저 ID 입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00569}{569}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00570\ \ \ \ \ \{}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}find"{}};}
\DoxyCodeLine{00572\ }
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00577\ }
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ var\ condition\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{true}}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isClass)}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}ClassID"{}}]\ =\ userID;}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}PersonID"{}}]\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}PersonID"{}}]\ =\ userID;}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00593\ }
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ condition,}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ projection\ =\ \textcolor{keyword}{new}\ \{\ Ranking\ =\ 1,\ UserName\ =\ \textcolor{stringliteral}{"{}\$Name"{}},\ CountryCode\ =\ 1,\ CountryImg\ =\ 1,\ Score\ =\ \textcolor{stringliteral}{"{}\$RecordDetail.Score"{}}\ \},}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \ \ \ \ sort\ =\ \textcolor{keyword}{new}\ \{\ score\ =\ -\/1\ \},}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ limit\ =\ 1}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}score\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}RecordDetail.Score\(\backslash\)"{}"{}});}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Rank>(url,\ jsonData,\ response\ =>}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null}\ \&\&\ response.Count\ >\ 0)}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00611\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ userScore\ =\ response[0].Score;}
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(new\ List<int>\{\ userScore\});}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00619\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a586799f9c49734e0656f67056f6a3181_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_a1e201269686abda9273e4b83695bb5ac}\index{GameRecordService@{GameRecordService}!GetContentMyRanking@{GetContentMyRanking}}
\index{GetContentMyRanking@{GetContentMyRanking}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetContentMyRanking()}{GetContentMyRanking()}}
{\footnotesize\ttfamily \label{class_game_record_service_a1e201269686abda9273e4b83695bb5ac} 
IEnumerator Game\+Record\+Service.\+Get\+Content\+My\+Ranking (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{string}]{user\+ID}{, }\item[{bool}]{is\+Class}{, }\item[{Action$<$ List$<$ \mbox{\hyperlink{class_rank}{Rank}} $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



콘텐츠별 개인 순위를 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em content\+Name} & 콘텐츠 이름입니다. \\
\hline
{\em user\+ID} & 유저 ID 입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00124}{124}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00125\ \ \ \ \ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}find"{}};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ var\ condition\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{true}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isClass)}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}ClassID"{}}]\ =\ userID;}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}PersonID"{}}]\ =\ \textcolor{keyword}{null};}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ condition[\textcolor{stringliteral}{"{}PersonID"{}}]\ =\ userID;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ condition,}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ projection\ =\ \textcolor{keyword}{new}\ \{\ Ranking\ =\ 1,\ UserName\ =\ \textcolor{stringliteral}{"{}\$Name"{}},\ CountryCode\ =\ 1,\ CountryImg\ =\ 1,\ Score\ =\ \textcolor{stringliteral}{"{}\$RecordDetail.Score"{}}\ \},}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ sort\ =\ \textcolor{keyword}{new}\ \{\ Score\ =\ -\/1\ \},}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ limit\ =\ 1}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Rank>(url,\ jsonData,\ response\ =>}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null}\ \&\&\ response.Count\ >\ 0)}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ userScore\ =\ response[0].Score;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StartCoroutine(GetUserRanking(contentName,\ userScore,\ true,\ (rank)\ =>}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ response[0].Ranking\ =\ rank;}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response);}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00178\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a1e201269686abda9273e4b83695bb5ac_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_a5df32babc993ae2eb48934dac0310153}\index{GameRecordService@{GameRecordService}!GetContentMyRankingWithNeighbors@{GetContentMyRankingWithNeighbors}}
\index{GetContentMyRankingWithNeighbors@{GetContentMyRankingWithNeighbors}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetContentMyRankingWithNeighbors()}{GetContentMyRankingWithNeighbors()}}
{\footnotesize\ttfamily \label{class_game_record_service_a5df32babc993ae2eb48934dac0310153} 
IEnumerator Game\+Record\+Service.\+Get\+Content\+My\+Ranking\+With\+Neighbors (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{string}]{user\+ID}{, }\item[{Action$<$ \mbox{\hyperlink{class_dual_rank}{Dual\+Rank}} $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00259}{259}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00260\ \ \ \ \ \{}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}aggregate"{}};}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ NullValueHandling\ =\ NullValueHandling.Ignore}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ var\ pipeline\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00271\ \ \ \ \ \{}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$match"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{false}}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$project"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\_id"{}}]\ =\ 0,}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Names"{}}]\ =\ 1,}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}PersonIDs"{}}]\ =\ 1,}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ClassIDs"{}}]\ =\ 1,}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}CountryCodes"{}}]\ =\ 1,}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}CountryImgs"{}}]\ =\ 1,}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}RecordDetails"{}}]\ =\ 1}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$unwind"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}path"{}}]\ =\ \textcolor{stringliteral}{"{}\$RecordDetails"{}},}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}includeArrayIndex"{}}]\ =\ \textcolor{stringliteral}{"{}playerIndex"{}}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$project"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}UserName"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$Names"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \},}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}UserId"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$cond"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}if"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$ifNull"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$PersonIDs"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \},\ \textcolor{keyword}{null}\ \}\ \},}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}then"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$PersonIDs"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \},}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}else"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$ClassIDs"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \}}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}CountryCode"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$CountryCodes"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \},}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}CountryImg"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$CountryImgs"{}},\ \textcolor{stringliteral}{"{}\$playerIndex"{}}\ \}\ \},}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Score"{}}]\ =\ \textcolor{stringliteral}{"{}\$RecordDetails.Score"{}}}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$sort"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ }
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Score"{}}]\ =\ -\/1,}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}UserName"{}}]\ =\ 1}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$group"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\_id"{}}]\ =\ \textcolor{keyword}{null},}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}allPlayers"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$push"{}}]\ =\ \textcolor{stringliteral}{"{}\$\$ROOT"{}}\ \}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$addFields"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}userIndex"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$indexOfArray"{}}]\ =\ \textcolor{keyword}{new}\ JArray\{\ \textcolor{stringliteral}{"{}\$allPlayers.UserId"{}},\ userID\ \}\ \}}
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$project"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}userRank"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$add"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$userIndex"{}},\ 1\ \}\ \},}
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}aboveUserScore"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$cond"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}if"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$gt"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$userIndex"{}},}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}then"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$allPlayers"{}},}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$subtract"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$userIndex"{}},\ 1\ \}\ \}}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}else"{}}]\ =\ \textcolor{keyword}{null}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}userScore"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$allPlayers"{}},}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$userIndex"{}}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}belowUserScore"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$cond"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}if"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$lt"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$userIndex"{}},}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$subtract"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$size"{}}]\ =\ \textcolor{stringliteral}{"{}\$allPlayers"{}}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 1}
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}then"{}}]=\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}\$allPlayers"{}},}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$add"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$userIndex"{}},\ 1\ \}\ \}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}else"{}}]\ =\ \textcolor{keyword}{null}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00414\ \ \ \ \ \};}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ var\ requestBody\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}dataSource"{}}]\ =\ dataSource,}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}database"{}}]\ =\ database,}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}collection"{}}]\ =\ collection,}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}pipeline"{}}]\ =\ pipeline}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(requestBody,\ settings);}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}GetContentMyRankingWithNeighbors\ request:\ \{jsonData\}"{}});}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<DualRank>(url,\ jsonData,\ response\ =>}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}GetContentMyRankingWithNeighbors\ response:\ \{response\}"{}});}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null}\ \&\&\ response.Count\ >\ 0)}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ result\ =\ response[0];}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result.userScore.Ranking\ =\ result.userRank;}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (result.aboveUserScore\ !=\ null)\ result.aboveUserScore.Ranking\ =\ result.userRank\ -\/\ 1;}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (result.belowUserScore\ !=\ null)\ result.belowUserScore.Ranking\ =\ result.userRank\ +\ 1;}
\DoxyCodeLine{00436\ }
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(result);}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(null);}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00444\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a5df32babc993ae2eb48934dac0310153_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_af0049715eb82f6bc892a00d2da8c4144}\index{GameRecordService@{GameRecordService}!GetContentRanking@{GetContentRanking}}
\index{GetContentRanking@{GetContentRanking}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetContentRanking()}{GetContentRanking()}}
{\footnotesize\ttfamily \label{class_game_record_service_af0049715eb82f6bc892a00d2da8c4144} 
IEnumerator Game\+Record\+Service.\+Get\+Content\+Ranking (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{Action$<$ List$<$ \mbox{\hyperlink{class_rank}{Rank}} $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



콘텐츠별 랭킹을 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em content\+Name} & 콘텐츠 이름입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00056}{56}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00057\ \ \ \ \ \{}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}find"{}};}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ ContentName\ =\ contentName,\ IsSingle\ =\ \textcolor{keyword}{true}\ \},}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ projection\ =\ \textcolor{keyword}{new}\ \{\ Ranking\ =\ 1,\ UserName\ =\ \textcolor{stringliteral}{"{}\$Name"{}},\ CountryCode\ =\ 1,\ CountryImg\ =\ 1,\ Score\ =\ \textcolor{stringliteral}{"{}\$RecordDetail.Score"{}}\ \},}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ sort\ =\ \textcolor{keyword}{new}\ \{\ score\ =\ -\/1\ \},}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ limit\ =\ 5}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}score\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}RecordDetail.Score\(\backslash\)"{}"{}});}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Rank>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 클라이언트\ 측에서\ 순번\ 매기기}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AssignRankings(response);}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}No\ response\ or\ error\ in\ data\ fetching"{}});}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00091\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_af0049715eb82f6bc892a00d2da8c4144_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_a2b88a939186fcd23a265e5a3c3fc29d5}\index{GameRecordService@{GameRecordService}!GetDualContentBestScore@{GetDualContentBestScore}}
\index{GetDualContentBestScore@{GetDualContentBestScore}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetDualContentBestScore()}{GetDualContentBestScore()}}
{\footnotesize\ttfamily \label{class_game_record_service_a2b88a939186fcd23a265e5a3c3fc29d5} 
IEnumerator Game\+Record\+Service.\+Get\+Dual\+Content\+Best\+Score (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{Action$<$ int $>$}]{callback}{}\end{DoxyParamCaption})}



콘텐츠별 개인 순위를 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em content\+Name} & 콘텐츠 이름입니다. \\
\hline
{\em user\+ID} & 유저 ID 입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00629}{629}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00630\ \ \ \ \ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}aggregate"{}};}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00637\ }
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ var\ pipeline\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$match"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00644\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{false}}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$addFields"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Index"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$indexOfArray"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$Names"{}},\ \textcolor{stringliteral}{"{}\$Winner"{}}\ \}}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$project"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}higherScoresCount"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$RecordDetails.Score"{}},\ \textcolor{stringliteral}{"{}\$Index"{}}\ \}\ \}}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$sort"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}higherScoresCount"{}}]\ =\ -\/1}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$limit"{}}]\ =\ 1}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00677\ }
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ var\ requestBody\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}dataSource"{}}]\ =\ dataSource,}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}database"{}}]\ =\ database,}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}collection"{}}]\ =\ collection,}
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}pipeline"{}}]\ =\ pipeline}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(requestBody,\ settings);}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00687\ }
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<DocumentWrapper>(url,\ jsonData,\ response\ =>}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null}\ \&\&\ response.Count\ >\ 0)}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response[0].higherScoresCount);}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(0);}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00699\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a2b88a939186fcd23a265e5a3c3fc29d5_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_a45408f80a44293f295eba9010a8255d1}\index{GameRecordService@{GameRecordService}!GetDualTopPercent@{GetDualTopPercent}}
\index{GetDualTopPercent@{GetDualTopPercent}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetDualTopPercent()}{GetDualTopPercent()}}
{\footnotesize\ttfamily \label{class_game_record_service_a45408f80a44293f295eba9010a8255d1} 
IEnumerator Game\+Record\+Service.\+Get\+Dual\+Top\+Percent (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{int}]{score}{, }\item[{Action$<$ int $>$}]{callback}{}\end{DoxyParamCaption})}



콘텐츠별 개인 순위를 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em content\+Name} & 콘텐츠 이름입니다. \\
\hline
{\em user\+ID} & 유저 ID 입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00709}{709}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00710\ \ \ \ \ \{}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}aggregate"{}};}
\DoxyCodeLine{00712\ }
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00716\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ var\ pipeline\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00719\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$match"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00727\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$addFields"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Index"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$indexOfArray"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$Names"{}},\ \textcolor{stringliteral}{"{}\$Winner"{}}\ \}}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00738\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$project"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Score"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$arrayElemAt"{}}]\ =\ \textcolor{keyword}{new}\ JArray\ \{\ \textcolor{stringliteral}{"{}\$RecordDetails.Score"{}},\ \textcolor{stringliteral}{"{}\$Index"{}}\ \}\ \}}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00744\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}\$match"{}}]\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}Score"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$gt"{}}]\ =\ score\ \}}
\DoxyCodeLine{00750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \ \ \ \ \},}
\DoxyCodeLine{00752\ }
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$count"{}}]\ =\ \textcolor{stringliteral}{"{}higherScoresCount"{}}\ \}}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00755\ }
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ var\ requestBody\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00758\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}dataSource"{}}]\ =\ dataSource,}
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}database"{}}]\ =\ database,}
\DoxyCodeLine{00760\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}collection"{}}]\ =\ collection,}
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}pipeline"{}}]\ =\ pipeline}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(requestBody,\ settings);}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<DocumentWrapper>(url,\ jsonData,\ (higherScoresCount)\ =>}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(higherScoresCount);}
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (higherScoresCount.Count\ >\ 0)}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ higherCount\ =\ higherScoresCount[0].higherScoresCount;}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}higherCount:\ \{higherCount\}"{}});}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StartCoroutine(GetDualTotalCount(contentName,\ totalCount\ =>}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (totalCount\ >\ 0)}
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}totalCount:\ \{totalCount\}"{}});}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float\ percent\ =\ (float)higherCount\ /\ totalCount\ *\ 100;}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(((int)Math.Round(percent)));}
\DoxyCodeLine{00780\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(0);}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(0);}
\DoxyCodeLine{00790\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00792\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a45408f80a44293f295eba9010a8255d1_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_a6e15261538fd2e4db6b4eb269ae1910a}\index{GameRecordService@{GameRecordService}!GetTopPercentMyScore@{GetTopPercentMyScore}}
\index{GetTopPercentMyScore@{GetTopPercentMyScore}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{GetTopPercentMyScore()}{GetTopPercentMyScore()}}
{\footnotesize\ttfamily \label{class_game_record_service_a6e15261538fd2e4db6b4eb269ae1910a} 
IEnumerator Game\+Record\+Service.\+Get\+Top\+Percent\+My\+Score (\begin{DoxyParamCaption}\item[{string}]{content\+Name}{, }\item[{int}]{score}{, }\item[{Action$<$ List$<$ int $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



게임 종료시 데이터를 불러옵니다. 


\begin{DoxyParams}{매개변수}
{\em game\+Record} & 저장할 게임 기록입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00455}{455}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00456\ \ \ \ \ \{}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}aggregate"{}};}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ var\ matchCondition\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}ContentName"{}}]\ =\ contentName,}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}IsSingle"{}}]\ =\ \textcolor{keyword}{true},}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}RecordDetail.Score"{}}]\ =\ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$gt"{}}]\ =\ score\ \}}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ var\ pipeline\ =\ \textcolor{keyword}{new}\ JArray}
\DoxyCodeLine{00472\ \ \ \ \ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$match"{}}]\ =\ matchCondition\ \},}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ JObject\ \{\ [\textcolor{stringliteral}{"{}\$count"{}}]\ =\ \textcolor{stringliteral}{"{}higherScoresCount"{}}\ \}}
\DoxyCodeLine{00475\ \ \ \ \ \};}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ var\ requestBody\ =\ \textcolor{keyword}{new}\ JObject}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}dataSource"{}}]\ =\ dataSource,}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}database"{}}]\ =\ database,}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}collection"{}}]\ =\ collection,}
\DoxyCodeLine{00482\ \ \ \ \ \ \ \ \ \ \ \ \ [\textcolor{stringliteral}{"{}pipeline"{}}]\ =\ pipeline}
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00484\ }
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(requestBody,\ settings);}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}Get\ Top\ Percent\ \{jsonData\}"{}});}
\DoxyCodeLine{00487\ }
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<DocumentWrapper>(url,\ jsonData,\ (higherScoresCount)\ =>}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(higherScoresCount);}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (higherScoresCount.Count\ >\ 0)}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int\ higherCount\ =\ higherScoresCount[0].higherScoresCount;}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}higherCount:\ \{higherCount\}"{}});}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StartCoroutine(GetTotalCount(contentName,\ totalCount\ =>}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ if\ (totalCount\ >\ 0)}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\$\textcolor{stringliteral}{"{}totalCount:\ \{totalCount\}"{}});}
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ float\ percent\ =\ (float)higherCount\ /\ totalCount\ *\ 100;}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(new\ List<int>\ \{\ ((int)Math.Round(percent))\ \});}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ else}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(null);}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00514\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_a6e15261538fd2e4db6b4eb269ae1910a_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_game_record_service_ada0bad7effce61b2c0f0b9061e3da049}\index{GameRecordService@{GameRecordService}!SaveGameRecord@{SaveGameRecord}}
\index{SaveGameRecord@{SaveGameRecord}!GameRecordService@{GameRecordService}}
\doxysubsubsection{\texorpdfstring{SaveGameRecord()}{SaveGameRecord()}}
{\footnotesize\ttfamily \label{class_game_record_service_ada0bad7effce61b2c0f0b9061e3da049} 
IEnumerator Game\+Record\+Service.\+Save\+Game\+Record (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_game_record}{Game\+Record}}}]{game\+Record}{, }\item[{Action$<$ List$<$ string $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



게임 기록을 저장합니다. 


\begin{DoxyParams}{매개변수}
{\em game\+Record} & 저장할 게임 기록입니다. \\
\hline
{\em callback} & 결과를 처리할 콜백 함수입니다. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{반환값}
코루틴 처리를 위한 IEnumerator입니다. 
\end{DoxyReturn}


\mbox{\hyperlink{_game_record_service_8cs_source}{Game\+Record\+Service.\+cs}} 파일의 \mbox{\hyperlink{_game_record_service_8cs_source_l00027}{27}} 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}insertOne"{}};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ settings.NullValueHandling\ =\ NullValueHandling.Ignore;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ document\ =\ gameRecord}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<string>(url,\ jsonData,\ callback);}
\DoxyCodeLine{00046\ \ \ \ \ \}}

\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_game_record_service_ada0bad7effce61b2c0f0b9061e3da049_icgraph}
\end{center}
\end{figure}


이 클래스에 대한 문서화 페이지는 다음의 파일로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
D\+:/\+Unity/\+Senior\+Olympics/\+Assets/01.\+SPODY2.\+0/\+Scripts/\+Public/\+HTTP/\mbox{\hyperlink{_game_record_service_8cs}{Game\+Record\+Service.\+cs}}\end{DoxyCompactItemize}
