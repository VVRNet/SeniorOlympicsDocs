\doxysection{Agency\+Service ÌÅ¥ÎûòÏä§ Ï∞∏Ï°∞}
\hypertarget{class_agency_service}{}\label{class_agency_service}\index{AgencyService@{AgencyService}}


Agency\+ServiceÏóê ÎåÄÌïú ÏÉÅÏÜç Îã§Ïù¥Ïñ¥Í∑∏Îû® \+: 
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{class_agency_service__inherit__graph}
\end{center}
\end{figure}


Agency\+ServiceÏóê ÎåÄÌïú ÌòëÎ†• Îã§Ïù¥Ïñ¥Í∑∏Îû®\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{class_agency_service__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Î©§Î≤Ñ Ìï®Ïàò}
\begin{DoxyCompactItemize}
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a620519ae769ad9cb63fc068ff9ea49e3}{Create\+Agency}} (\mbox{\hyperlink{class_agency}{Agency}} agency, Action$<$ List$<$ string $>$ $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a4808a9e6342d025e1fb1f86f7eea2be6}{License\+Check}} (string admin\+Email, Action$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a311d81d232cb9d83fef779a4294d5df9}{Get\+Agencies}} (Action$<$ List$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$ $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a041b76c880832c02b2aef312a74e33da}{Login}} (string admin\+Email, string password, Action$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a095c1e84f3952dade68ebf29b0c94133}{Update\+Agency\+Field}} (string agency\+Id, string field\+Name, object field\+Value, Action$<$ bool $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a045ee66a8f838387499d7ad2c9fa3a66}{Add\+Class}} (string agency\+Id, \mbox{\hyperlink{class_class}{Class}} new\+Class, Action$<$ bool $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a47b9a7a55ef705e2df4c35298221377e}{Remove\+Class}} (string class\+Name, Action$<$ bool $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a9a9fa6db0550dc0fc06653282576dd3d}{Add\+Student}} (string class\+Name, \mbox{\hyperlink{class_student}{Student}} new\+Student, Action$<$ bool $>$ callback)
\item 
IEnumerator \mbox{\hyperlink{class_agency_service_a6deba71c329c0277247a61f4da300ef9}{Remove\+Student}} (string class\+Name, string student\+Id, Action$<$ bool $>$ callback)
\end{DoxyCompactItemize}
\doxysubsubsection*{Ï∂îÍ∞ÄÎ°ú ÏÉÅÏÜçÎêú Î©§Î≤ÑÎì§}
\doxysubsection*{\mbox{\hyperlink{class_base_service}{Base\+Service}}(Ïúº)Î°úÎ∂ÄÌÑ∞ ÏÉÅÏÜçÎêú Protected Î©§Î≤Ñ Ìï®Ïàò}
\begin{DoxyCompactItemize}
\item 
IEnumerator \mbox{\hyperlink{class_base_service_a58277b5cf1c1f86cefcfa19a3069ccde}{Send\+Request$<$ T $>$}} (string url, string json\+Data, Action$<$ List$<$ T $>$ $>$ callback)
\end{DoxyCompactItemize}
\doxysubsection*{\mbox{\hyperlink{class_base_service}{Base\+Service}}(Ïúº)Î°úÎ∂ÄÌÑ∞ ÏÉÅÏÜçÎêú Protected ÏÜçÏÑ±}
\begin{DoxyCompactItemize}
\item 
string \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{base\+Url}} = "{}https\+://us-\/west-\/2.aws.\+data.\+mongodb-\/api.\+com/app/data-\/xhqnv/endpoint/data/v1/action/"{}
\end{DoxyCompactItemize}


\doxysubsection{ÏÉÅÏÑ∏Ìïú ÏÑ§Î™Ö}


\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00008}{8}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.



\doxysubsection{Î©§Î≤Ñ Ìï®Ïàò Î¨∏ÏÑúÌôî}
\Hypertarget{class_agency_service_a045ee66a8f838387499d7ad2c9fa3a66}\index{AgencyService@{AgencyService}!AddClass@{AddClass}}
\index{AddClass@{AddClass}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{AddClass()}{AddClass()}}
{\footnotesize\ttfamily \label{class_agency_service_a045ee66a8f838387499d7ad2c9fa3a66} 
IEnumerator Agency\+Service.\+Add\+Class (\begin{DoxyParamCaption}\item[{string}]{agency\+Id}{, }\item[{\mbox{\hyperlink{class_class}{Class}}}]{new\+Class}{, }\item[{Action$<$ bool $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00224}{224}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00225\ \ \ \ \ \{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ var\ agency\ =\ \mbox{\hyperlink{class_session_manager}{SessionManager}}.\mbox{\hyperlink{class_session_manager_a41ea72dc41ee7bc4fa633b6ef7a09125}{Instance}}.LoggedInAgency;}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (agency\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}updateOne"{}};}
\DoxyCodeLine{00230\ }
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ \_id\ =\ \textcolor{keyword}{new}\ \{\ \_oid\ =\ agency.\_id\ \}\ \},}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\ =\ \textcolor{keyword}{new}\ \{\ \_push\ =\ \textcolor{keyword}{new}\ \{\ Classes\ =\ newClass\ \}\ \}}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_push\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$push\(\backslash\)"{}"{}});}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_oid\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$oid\(\backslash\)"{}"{}});}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ agency.Classes.Add(newClass);}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}Agency\ Not\ Login"{}});}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a9a9fa6db0550dc0fc06653282576dd3d}\index{AgencyService@{AgencyService}!AddStudent@{AddStudent}}
\index{AddStudent@{AddStudent}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{AddStudent()}{AddStudent()}}
{\footnotesize\ttfamily \label{class_agency_service_a9a9fa6db0550dc0fc06653282576dd3d} 
IEnumerator Agency\+Service.\+Add\+Student (\begin{DoxyParamCaption}\item[{string}]{class\+Name}{, }\item[{\mbox{\hyperlink{class_student}{Student}}}]{new\+Student}{, }\item[{Action$<$ bool $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00299}{299}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00300\ \ \ \ \ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ var\ agency\ =\ \mbox{\hyperlink{class_session_manager}{SessionManager}}.\mbox{\hyperlink{class_session_manager_a41ea72dc41ee7bc4fa633b6ef7a09125}{Instance}}.LoggedInAgency;}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (agency\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}updateOne"{}};}
\DoxyCodeLine{00305\ }
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ \_id\ =\ \textcolor{keyword}{new}\ \{\ \_oid\ =\ agency.\_id\ \},\ classesName\ =\ className\ \},}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\ =\ \textcolor{keyword}{new}\ \{\ \_push\ =\ \textcolor{keyword}{new}\ \{\ classStudent\ =\ newStudent\ \}\ \}}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_push\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$push\(\backslash\)"{}"{}});}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}classesName\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}Classes.Name\(\backslash\)"{}"{}});}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}classStudent\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}Classes.\$.Students\(\backslash\)"{}"{}});}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_oid\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$oid\(\backslash\)"{}"{}});}
\DoxyCodeLine{00322\ }
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00327\ }
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_class}{Class}}\ classToAddStudent\ =\ agency.Classes.FirstOrDefault(c\ =>\ c.Name\ ==\ className);}
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ classToAddStudent.\mbox{\hyperlink{class_class_a375c0fd37d7ec570bd145ea1b2f75203}{Students}}.Add(newStudent);}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00335\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}Agency\ Not\ Login"{}});}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00338\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a620519ae769ad9cb63fc068ff9ea49e3}\index{AgencyService@{AgencyService}!CreateAgency@{CreateAgency}}
\index{CreateAgency@{CreateAgency}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{CreateAgency()}{CreateAgency()}}
{\footnotesize\ttfamily \label{class_agency_service_a620519ae769ad9cb63fc068ff9ea49e3} 
IEnumerator Agency\+Service.\+Create\+Agency (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_agency}{Agency}}}]{agency}{, }\item[{Action$<$ List$<$ string $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00014}{14}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00015\ \ \ \ \ \{}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (agency\ ==\ \textcolor{keyword}{null})}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.LogError(\textcolor{stringliteral}{"{}agency\ is\ null"{}});}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordtype}{string}.IsNullOrEmpty(agency.\mbox{\hyperlink{class_agency_a025f5bdbaa36016b45a53491996ec2d5}{AdminEmail}}))}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.LogError(\textcolor{stringliteral}{"{}AdminEmail\ is\ null\ or\ empty"{}});}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ AdminEmail\ ¡ﬂ∫π\ √º≈©}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ CheckAdminEmailExists(agency.\mbox{\hyperlink{class_agency_a025f5bdbaa36016b45a53491996ec2d5}{AdminEmail}},\ (exists)\ =>}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ if\ (exists[0])}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(new\ List<string>\{\ \textcolor{stringliteral}{"{}AdminEmail\ already\ exists"{}}\});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ return;}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(agency.ToString());}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ string\ url\ =\ baseUrl\ +\ \textcolor{stringliteral}{"{}insertOne"{}};}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(url);}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ settings\ =\ new\ JsonSerializerSettings();}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(new\ MongoDbDateTimeConverter());}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(new\ MongoDbObjectIdConverter());}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ string\ jsonData\ =\ JsonConvert.SerializeObject(new}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ document\ =\ agency}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ StartCoroutine(SendRequest<string>(url,\ jsonData,\ callback));}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00058\ \ \ \ \ \}}

\end{DoxyCode}
Ïù¥ Ìï®ÏàòÎ•º Ìò∏Ï∂úÌïòÎäî Ìï®ÏàòÎì§Ïóê ÎåÄÌïú Í∑∏ÎûòÌîÑÏûÖÎãàÎã§.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_agency_service_a620519ae769ad9cb63fc068ff9ea49e3_icgraph}
\end{center}
\end{figure}
\Hypertarget{class_agency_service_a311d81d232cb9d83fef779a4294d5df9}\index{AgencyService@{AgencyService}!GetAgencies@{GetAgencies}}
\index{GetAgencies@{GetAgencies}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{GetAgencies()}{GetAgencies()}}
{\footnotesize\ttfamily \label{class_agency_service_a311d81d232cb9d83fef779a4294d5df9} 
IEnumerator Agency\+Service.\+Get\+Agencies (\begin{DoxyParamCaption}\item[{Action$<$ List$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$ $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00133}{133}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00134\ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}find"{}};}
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00147\ }
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response);}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00152\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a4808a9e6342d025e1fb1f86f7eea2be6}\index{AgencyService@{AgencyService}!LicenseCheck@{LicenseCheck}}
\index{LicenseCheck@{LicenseCheck}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{LicenseCheck()}{LicenseCheck()}}
{\footnotesize\ttfamily \label{class_agency_service_a4808a9e6342d025e1fb1f86f7eea2be6} 
IEnumerator Agency\+Service.\+License\+Check (\begin{DoxyParamCaption}\item[{string}]{admin\+Email}{, }\item[{Action$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00095}{95}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00096\ \ \ \ \ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keywordtype}{string}.IsNullOrEmpty(adminEmail))}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.LogError(\textcolor{stringliteral}{"{}adminEmail\ is\ null\ or\ empty"{}});}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}findOne"{}};}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ AdminEmail\ =\ adminEmail\ \}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(response);}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response[0]);}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}No\ documents\ found."{}});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00130\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a041b76c880832c02b2aef312a74e33da}\index{AgencyService@{AgencyService}!Login@{Login}}
\index{Login@{Login}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{Login()}{Login()}}
{\footnotesize\ttfamily \label{class_agency_service_a041b76c880832c02b2aef312a74e33da} 
IEnumerator Agency\+Service.\+Login (\begin{DoxyParamCaption}\item[{string}]{admin\+Email}{, }\item[{string}]{password}{, }\item[{Action$<$ \mbox{\hyperlink{class_agency}{Agency}} $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00155}{155}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00156\ \ \ \ \ \{}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}findOne"{}};}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ AdminEmail\ =\ adminEmail\ \}}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (response\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ var\ agency\ =\ response[0];}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_password_helper}{PasswordHelper}}.\mbox{\hyperlink{class_password_helper_acd696dd43f0b278625974b824fb8c227}{VerifyPassword}}(password,\ agency.Password))}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(agency);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//"{}Login\ successful"{}}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(null);}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//"{}Invalid\ password"{}}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(\textcolor{keyword}{null});}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00193\ \ \ \ \ \}}

\end{DoxyCode}
Ïù¥ Ìï®Ïàò ÎÇ¥Î∂ÄÏóêÏÑú Ìò∏Ï∂úÌïòÎäî Ìï®ÏàòÎì§Ïóê ÎåÄÌïú Í∑∏ÎûòÌîÑÏûÖÎãàÎã§.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_agency_service_a041b76c880832c02b2aef312a74e33da_cgraph}
\end{center}
\end{figure}
\Hypertarget{class_agency_service_a47b9a7a55ef705e2df4c35298221377e}\index{AgencyService@{AgencyService}!RemoveClass@{RemoveClass}}
\index{RemoveClass@{RemoveClass}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{RemoveClass()}{RemoveClass()}}
{\footnotesize\ttfamily \label{class_agency_service_a47b9a7a55ef705e2df4c35298221377e} 
IEnumerator Agency\+Service.\+Remove\+Class (\begin{DoxyParamCaption}\item[{string}]{class\+Name}{, }\item[{Action$<$ bool $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00263}{263}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00264\ \ \ \ \ \{}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ var\ agency\ =\ \mbox{\hyperlink{class_session_manager}{SessionManager}}.\mbox{\hyperlink{class_session_manager_a41ea72dc41ee7bc4fa633b6ef7a09125}{Instance}}.LoggedInAgency;}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (agency\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}updateOne"{}};}
\DoxyCodeLine{00269\ }
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ \_id\ =\ \textcolor{keyword}{new}\ \{\ \_oid\ =\ agency.\_id\ \}\ \},}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\ =\ \textcolor{keyword}{new}\ \{\ \_pull\ =\ \textcolor{keyword}{new}\ \{\ Classes\ =\ \textcolor{keyword}{new}\ \{\ Name\ =\ className\ \}\ \}\ \}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_pull\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$pull\(\backslash\)"{}"{}});}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_oid\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$oid\(\backslash\)"{}"{}});}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ agency.Classes.RemoveAll(c\ =>\ c.Name\ ==\ className);}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}Agency\ Not\ Login"{}});}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00296\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a6deba71c329c0277247a61f4da300ef9}\index{AgencyService@{AgencyService}!RemoveStudent@{RemoveStudent}}
\index{RemoveStudent@{RemoveStudent}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{RemoveStudent()}{RemoveStudent()}}
{\footnotesize\ttfamily \label{class_agency_service_a6deba71c329c0277247a61f4da300ef9} 
IEnumerator Agency\+Service.\+Remove\+Student (\begin{DoxyParamCaption}\item[{string}]{class\+Name}{, }\item[{string}]{student\+Id}{, }\item[{Action$<$ bool $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00341}{341}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00342\ \ \ \ \ \{}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ var\ agency\ =\ \mbox{\hyperlink{class_session_manager}{SessionManager}}.\mbox{\hyperlink{class_session_manager_a41ea72dc41ee7bc4fa633b6ef7a09125}{Instance}}.LoggedInAgency;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (agency\ !=\ \textcolor{keyword}{null})}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}updateOne"{}};}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ \_id\ =\ \textcolor{keyword}{new}\ \{\ \_oid\ =\ agency.\_id\ \},\ classesName\ =\ className\ \},}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ update\ =\ \textcolor{keyword}{new}\ \{\ \_pull\ =\ \textcolor{keyword}{new}\ \{\ classStudent\ =\ \textcolor{keyword}{new}\ \{\ Id\ =\ studentId\ \}\ \}\ \}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_pull\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$pull\(\backslash\)"{}"{}});}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}classesName\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}Classes.Name\(\backslash\)"{}"{}});}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}classStudent\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}Classes.\$.Students\(\backslash\)"{}"{}});}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_oid\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$oid\(\backslash\)"{}"{}});}
\DoxyCodeLine{00364\ }
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_class}{Class}}\ classToRemoveStudent\ =\ agency.Classes.FirstOrDefault(c\ =>\ c.Name\ ==\ className);}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ classToRemoveStudent.\mbox{\hyperlink{class_class_a375c0fd37d7ec570bd145ea1b2f75203}{Students}}.RemoveAll(s\ =>\ s.Id\ ==\ studentId);}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ Debug.Log(\textcolor{stringliteral}{"{}Agency\ Not\ Login"{}});}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00379\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{class_agency_service_a095c1e84f3952dade68ebf29b0c94133}\index{AgencyService@{AgencyService}!UpdateAgencyField@{UpdateAgencyField}}
\index{UpdateAgencyField@{UpdateAgencyField}!AgencyService@{AgencyService}}
\doxysubsubsection{\texorpdfstring{UpdateAgencyField()}{UpdateAgencyField()}}
{\footnotesize\ttfamily \label{class_agency_service_a095c1e84f3952dade68ebf29b0c94133} 
IEnumerator Agency\+Service.\+Update\+Agency\+Field (\begin{DoxyParamCaption}\item[{string}]{agency\+Id}{, }\item[{string}]{field\+Name}{, }\item[{object}]{field\+Value}{, }\item[{Action$<$ bool $>$}]{callback}{}\end{DoxyParamCaption})}



\mbox{\hyperlink{_agency_service_8cs_source}{Agency\+Service.\+cs}} ÌååÏùºÏùò \mbox{\hyperlink{_agency_service_8cs_source_l00196}{196}} Î≤àÏß∏ ÎùºÏù∏ÏóêÏÑú Ï†ïÏùòÎêòÏóàÏäµÎãàÎã§.


\begin{DoxyCode}{0}
\DoxyCodeLine{00197\ \ \ \ \ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ url\ =\ \mbox{\hyperlink{class_base_service_a1eaefb0b8df84caeabc13ea5cfc10954}{baseUrl}}\ +\ \textcolor{stringliteral}{"{}updateOne"{}};}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ var\ settings\ =\ \textcolor{keyword}{new}\ JsonSerializerSettings();}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_date_time_converter}{MongoDbDateTimeConverter}}());}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ settings.Converters.Add(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_mongo_db_object_id_converter}{MongoDbObjectIdConverter}}());}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ jsonData\ =\ JsonConvert.SerializeObject(\textcolor{keyword}{new}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ dataSource\ =\ dataSource,}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ database\ =\ database,}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ collection\ =\ collection,}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ filter\ =\ \textcolor{keyword}{new}\ \{\ \_id\ =\ \textcolor{keyword}{new}\ \{\ \_oid\ =\ agencyId\ \}\ \},}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ update\ =\ \textcolor{keyword}{new}\ \{\ \_set\ =\ \textcolor{keyword}{new}\ \{\ fieldName\ =\ fieldValue\ \}\ \}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \},\ settings);}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_set\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$set\(\backslash\)"{}"{}});}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}\_oid\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}\$oid\(\backslash\)"{}"{}});}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ jsonData\ =\ jsonData.Replace(\textcolor{stringliteral}{"{}\(\backslash\)"{}fieldName\(\backslash\)"{}"{}},\ \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}}\ +\ fieldName\ +\ \textcolor{stringliteral}{"{}\(\backslash\)"{}"{}});}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ Debug.Log(jsonData);}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ yield\ \textcolor{keywordflow}{return}\ SendRequest<Agency>(url,\ jsonData,\ (response)\ =>}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ callback?.Invoke(response\ !=\ \textcolor{keyword}{null});}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00221\ \ \ \ \ \}}

\end{DoxyCode}


Ïù¥ ÌÅ¥ÎûòÏä§Ïóê ÎåÄÌïú Î¨∏ÏÑúÌôî ÌéòÏù¥ÏßÄÎäî Îã§ÏùåÏùò ÌååÏùºÎ°úÎ∂ÄÌÑ∞ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§.\+:\begin{DoxyCompactItemize}
\item 
D\+:/\+Unity/\+Senior\+Olympics/\+Assets/01.\+SPODY2.\+0/\+Scripts/\+Public/\+HTTP/\mbox{\hyperlink{_agency_service_8cs}{Agency\+Service.\+cs}}\end{DoxyCompactItemize}
